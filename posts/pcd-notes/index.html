<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Google Cloud Professional Cloud Developer Study Guide Notes | Matt Lui</title>
<meta name=keywords content>
<meta name=description content="Complete Professional Cloud Developer notes built around the official study guide for the exam.">
<meta name=author content="Matt Lui">
<link rel=canonical href=https://mattlui.com/posts/pcd-notes/>
<meta name=google-site-verification content="XYZabc">
<meta name=yandex-verification content="XYZabc">
<meta name=msvalidate.01 content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.ba3afea71e93df38c9e9fe751a07236c5dc1d523e0176aa959d61683c54091c2.css integrity="sha256-ujr+px6T3zjJ6f51GgcjbF3B1SPgF2qpWdYWg8VAkcI=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://mattlui.com/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=16x16 href=https://mattlui.com/%3Clink%20/%20abs%20url%3E>
<link rel=icon type=image/png sizes=32x32 href=https://mattlui.com/%3Clink%20/%20abs%20url%3E>
<link rel=apple-touch-icon href=https://mattlui.com/%3Clink%20/%20abs%20url%3E>
<link rel=mask-icon href=https://mattlui.com/%3Clink%20/%20abs%20url%3E>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.89.4">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><meta property="og:title" content="Google Cloud Professional Cloud Developer Study Guide Notes">
<meta property="og:description" content="Complete Professional Cloud Developer notes built around the official study guide for the exam.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://mattlui.com/posts/pcd-notes/"><meta property="og:image" content="https://mattlui.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-11-24T16:28:15+10:00">
<meta property="article:modified_time" content="2021-11-24T16:28:15+10:00"><meta property="og:site_name" content="Matt Lui">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://mattlui.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="Google Cloud Professional Cloud Developer Study Guide Notes">
<meta name=twitter:description content="Complete Professional Cloud Developer notes built around the official study guide for the exam.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://mattlui.com/posts/"},{"@type":"ListItem","position":2,"name":"Google Cloud Professional Cloud Developer Study Guide Notes","item":"https://mattlui.com/posts/pcd-notes/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Google Cloud Professional Cloud Developer Study Guide Notes","name":"Google Cloud Professional Cloud Developer Study Guide Notes","description":"Complete Professional Cloud Developer notes built around the official study guide for the exam.","keywords":[],"articleBody":"The Professional Cloud Developer exam covers a large, possibly unbounded, amount of content. These notes were built to cover every topic Google has suggested can be on the exam.\nThe notes have a grey background, and each correspond to one of the ninity-one dot-points in the official GCP Professional Cloud Developer Study Guide. All outbound links refer to Google Cloud documentation.\nEverything’s been sourced from A Cloud Guru, Google Cloud Training on Coursera or the Google Cloud Docs themselves.\nTable of contents  Section 1: Designing highly scalable, available, and reliable cloud-native applications Section 2: Building and testing applications Section 3: Deploying applications Section 4: Integrating Google Cloud services Section 5: Managing application performance monitoring  Section 1: Designing highly scalable, available, and reliable cloud-native applications 1.1 Designing high-performing applications and APIs. Considerations include:\n Microservices   Microservices refers to an architectural style for developing applications. Microservices allow a large application to be decomposed into independent constituent parts, with each part having its own realm of responsibility. Benefits  Smaller, more modular codebase and deployments. A/B releases, independent development cycles for each service. Simplifies tangled dependencies. Stronger contracts between services. Easier to split up testing, cost accounting, logging and monitoring.   On App Engine, deploy a service per microservice.    Scaling velocity characteristics/trade-offs of IaaS (infrastructure as a service) vs. CaaS (container as a service) vs. PaaS (platform as a service)   Tradeoffs  IaaS (Compute Engine) PaaS (App Engine / GKE) CaaS (Cloud Run) FaaS (Cloud Functions)   Scalability  Serverless applications can scale quickly and you only pay for what you use (e.g. Cloud Run, Cloud Functions, App Engine). Aim for stateless microservices. You want to minimize start-up time for scalability. Create images, use containers or improve the app. With containers, use smaller base images (Alpine) and the builder pattern to minimize their size. See 5.2 GKE Autoscaling. GCE can autoscale managed instance groups. App Engine Flexible vs Standard: Standard spins up instances quicker and can have zero instances running. Flexible always has one running. Prefered standard for spiky or low traffic.      Geographic distribution of Google Cloud services (e.g., latency, regional services, zonal services)   Regions have three or more zones. Those zones have high-bandwidth, low-latency connections. Deploy to multiple zones for high-availability and fault-tolerance. Zonal services: VM instances, GKE Regional clusters. Regional services: Most serverless tech (Cloud Functions, Cloud Run) Static IPs, GKE Zonal clusters. Persistent Disks \u0026 Cloud SQL are zonal, but can sychronously replicate and become regional. Regions and Zones.    Defining a key structure for high-write applications using Cloud Storage, Cloud Bigtable, Cloud Spanner, or Cloud SQL   Cloud Storage: don’t name objects similarly. Cloud Bigtable: one key per table. You can put multiple keys into this one key and seperate them with hashes for more distributed reads. Cloud Spanner: Create second indexes and interleave related records for faster lookups. CloudSQL: Create secondary indexes or clustered indexes.    User session management   Authentication  Integrate Google Sign-in with OAuth 2.0 / OpenID. Better to use a third-party provider.      Caching solutions   Memorystore: managed in-memory caching. Redis \u0026 memcached, so you can read and write from your application code. Cloud CDN: Reduce latency by caching at the edge.    Deploying and securing API services   Secure images  Keep images up-to-date. Consider who you’re trusting. Can do this in CI.   CI  Build, create artifacts, test, run securty checks, deploy.   Design  Use an API schema. Cloud Endpoints / API Gateway: logging, monitoring, API keys, authentication. Cloud Endpoints: runs in Cloud Run, works for most GCP services. API Gateway: managed serverless gateway, simpler to set up.      Loosely coupled asynchronous applications (e.g., Apache Kafka, Pub/Sub)   Decouples application dependency. Great if components fail, you need multiple consumers of data, or an async workflow. Many-to-many, one-to-many, many-to-one patterns. Pull (default): subscriber makes a request to check for new messages. Push: topic hits a HTTP endpoint. Pub/Sub gives you implicit at-least-once delivery per subscription. Use Cloud Tasks for more explicit notification, with retries \u0026 scheduling.    Graceful shutdown on platform termination   Flush logs. Close file descriptors and database connections. GKE: on graceful shutdown, calls a preStop hook - a SIGTERM is recieved - grace period - SIGKILL. Cloud functions: delete any temporary files, as these are stored in memory and can be carried over between runs. Cloud Tech Video: Terminating with Grace (Kubernetes). Docs: Graceful Shutdown on Cloud Run.    Google-recommended practices and documentation   Docs: Patterns for scalable and resilient apps.   1.2 Designing secure applications. Considerations include:\n Implementing requirements that are relevant for applicable regulations (e.g., data wipeout)   Per-industry regulations on data storage regions, encryption and PII. Cloud Data Loss Prevention: discovers and protects sensitive data.    Security mechanisms that protect services and resources   IAM: Divide into folders per-team and a projects per-environment. One project per application per environment. Assign least privilege. VPC Firewall Rules: Direction (ingress/egress), priority (lower number is higher), action (allow/deny), status, target, source, protocol/port.  Helps define what traffic reaches your resources.   VPC Service Controls: Controls ingress and egress for an entire service perimiter, which houses the resources in a project.    Security mechanisms that secure/scan application binaries and manifests   Cloud Web Security Scanner: crawls a site for vulnerabilities. Container Scanning: available on-demand or as part of container registry.    Storing and rotating application secrets and keys (e.g., Cloud KMS, HashiCorp Vault)   Cloud KMS: Integrated with GCP services. Can run cryptographic operations but not actually use the keys. Cloud Secret Manager: Store API keys and credentials you need to download at runtime here. Both do key rotation (limits exposure, shut down keys if they’re exposed).    Authenticating to Google services (e.g., application default credentials, JSON Web Token (JWT), OAuth 2.0)   Application default credentials: credentials from the service account you attached to the service. JWT: alternative to OAuth 2.0 for some GCP APIs. OAuth 2.0: See 4.2.    IAM roles for users/groups/service accounts   Use predefined roles or create custom roles with the permissions you choose. Easily combine roles into a new one from the Cloud Console. Prefer to apply roles to Google groups.    Securing service-to-service communications (e.g., service mesh, Kubernetes Network Policies, and Kubernetes namespaces)   Service mesh: add a sidecar container to pods. Controlls ingress \u0026 egress. Security, load-balancing, traffic control, metrics and more. Kubernetes Network Policies: object that controls ingress and egress from a pod. Specify allowed IP ranges, namespaces and pods.    Running services with least privileged access (e.g., Workload Identity)   Create GCP service accounts to use instead of the Default Compute Service Account. Assign it access to only the services and scope it needs. See 4.2 workload identity.    Certificate-based authentication (e.g., SSL, mTLS)   mTLS  A two-way authentication protocol (mutual TLS). Possible to use mTLS as opposed to service account keys. Automatically done by Istio between GKE pods.   SSL  An encryption protocol required for HTTP(S) and SSL load balancers. Can be Google or self-managed. Docs: SSL certificates overview.      Google-recommended practices and documentation   Docs: Best pratices for enterprise organizations. Whitepaper: Google Cloud security foundations guide.   1.3 Managing application data. Considerations include:\n Defining database schemas for Google-managed databases (e.g., Firestore, Cloud Spanner, Cloud Bigtable, Cloud SQL)   Firestore: schemaless.  ‘Collections’ are a group of related ‘Documents’, which should be kept lightweight. To do this you can define hierarchical subcollections, which are collections associated with a document. Docs: Firestore Data Model.   Datastore:  Entities have a unique key. An entity group is an entity and its descendants. Generally, Firestore (Firestore in native mode) is preferred over Datastore (Firestore in datastore mode).   Cloud SQL: standard DDL. Cloud Spanner: extended DDL, with some extra features including table interleaving.  Docs: Spanner Schema and Data Model   Bigtable: NoSQL (wide, data fields are optional). Broken into column families.  Docs: Bigtable Scema Design.   Also see 1.1 choosing a key structure.    Choosing data storage options based on use case considerations, such as:   Time-limited access to objects Signed URLs: GCS URLs that provide temporary acccess.    Data retention requirements   Use the GCS storage tiers and Object Lifecycle Management rules to move between them automatically. Object holds (for retention) and policy locks (that can’t be removed). Unmodified BigQuery partitions get a 50% discount after 90 days.    Structured vs. unstructured data   Use GCS for unstructured data.    Strong vs. eventual consistency   Spanner, Firestore for strong consistency.    Data volume   Switch off CloudSQL above the tens of TB mark. Frequency of data access in Cloud Storage Nearline: 30 days, Coldline: 90 days, Archive: 365 days Storage price goes down, retrieval price goes up.    Google-recommended practices and documentation   Blog: Choosing the right compute option in GCP: a decision tree.   1.4 Application modernization. Considerations include:\n Using managed services   App engine standard: predefined runtimes. App engine flex: any runtime or container. Cloud functions: even-driven model. Cloud run: runs a stateless container.    Refactoring a monolith to microservices   Strangler pattern: abstract and replace component-by-component.    Designing stateless, horizontally scalable services   Split services into a clean seperation of those that are stateless and stateful. Stateless services are easier to scale.    Google-recommended practices and documentation   GCP Application Modernisation DevOps tech: Architecture Aim for statelessness   Section 2: Building and testing applications 2.1 Setting up your local development environment. Considerations include:\n Emulating Google Cloud services for local application development   Use the GCP beta emulators on your local machine for BigTable, Datastore, Firestore, Pub/Sub and Spanner.    Creating Google Cloud projects   Create a Project optionally under a folder, which are optionally under an Organisation Node. Project name: You choose it. Can change it. Project ID: You choose it. Can’t change it. Project number: GCP chooses it. Can’t change it.    Using the command-line interface (CLI), Google Cloud Console, and Cloud Shell tools   CLI: gcloud, gsutil (Cloud Storage), bq (BigQuery), cbt (BigTable) command-line tools. Cloud shell: browser-based CLI and editor.    Using developer tooling (e.g., Cloud Code, Skaffold)   Cloud Code (Skaffold): IDE extension for GCP development (easy deployments to GKE/Cloud Run for example).   2.2 Writing efficient code. Considerations include:\n Algorithm design   Minimise time complexity. Knowledge of basic data structures (linked lists, hash tables, arrays, search trees) and their advantages.    Modern application patterns   12 Factor App    Software development methodologies   Agile  waterfall. Prefer faster deployments and iterations. Test-driven development: write tests before code. Infrastructure as code: define Cloud resource with code.    Debugging and profiling code   See 5.3, Cloud Trace and Cloud Debugger.   2.3 Testing. Considerations include:\n Unit testing   Test a component in isolation. Find easy-to-spot errors. Automate your tests!    Integration testing   Group components together, include dependencies.    Performance testing   Measure latency.    Load testing   Place under heavy load, maybe for a long period and test scalability.   2.4 Building. Considerations include:\n Source control management   Store code with git in Cloud Source Repositories. You can set up Cloud Build triggers to run when changes are pushed to certain branches.    Creating secure container images from code   Add security scanning the CI process. You can add this as a Cloud Build step and call Container Registry on-demand, check the severity level and fail if it’s too high. Use Google’s managed base images, and build on top of those. Jib: creates optimized Docker images from Java applications    Developing a continuous integration pipeline using services (e.g., Cloud Build, Container Registry) that construct deployment artifacts   Cloud Build: fully managed, serverless container building. Can deploy to GCP, can create triggers, configured in YAML.  Each Cloud Build step in a pipeline is a Docker container. Pass data between steps by writing to the /workspace directory.   Spinnaker: CD for compute, containers, multi-cloud. E.g. set up a process for canary deployments. Tekton: CI/CD for k8s. Anthos Config Manager: matches the k8s environment to the config in a repo. Jenkins: Older kitchen sink.    Reviewing and improving continuous integration pipeline efficiency   See DevOps tech: Continious Integration. Metrics include: proportion of commits that trigger a build, test pass rate, build fix time, availability of feedback. Improvements include: increasing velocity of deployments/merges, automation, build duration (  Section 3: Deploying applications 3.1 Recommend appropriate deployment strategies using the appropriate tools (e.g., Cloud Build, Spinnaker, Tekton, Anthos Configuration Manager) for the target compute environment (e.g., Compute Engine, Google Kubernetes Engine). Considerations include:\n Blue/green deployments   Run two deployments at once. Switch the load balancer to the new version. Really easy to switch back if there’s an issue. GKE: Create a new deployment, test, then update the service selector. See Deployment Strategies on GKE.    Traffic-splitting deployments   Useful for A/B testing. Can be done in the console for App Engine. GKE: Use Istio, or deploy some of the pods with the new version. May need session affinity.    Rolling deployments   GCE: Can roll out new instance templates in a MIG. GKE: Apply an updated deployment. Pods will be recreated. Can set a rollingUpdate strategy with a maxUnavailable, and maxSurge (extra pods) to minimise distruption.    Canary deployments   For features that are best tested in prod. GKE: Same as traffic-splitting.   3.2 Deploying applications and services on Compute Engine. Considerations include:\n Installing an application into a virtual machine (VM)   SSH in and install, or use a startup script.    Managing service accounts for VMs   By default, uses the Compute Engine Default Service Account.  Not recommended in pratice: it gives too broad of a permission set (project editor).   Best to create a custom service account.    Bootstrapping applications   Provide a startup \u0026 shutdown script.  Can pass a startup script as a startup-script-url metadata tag, or add it directly.      Exporting application logs and metrics   Install the Cloud Logging agent (Stackdriver). It collects logs from a few standard places, including syslog, by default. The logging standard is fluentd. System metrics (CPU util, networking), are reported to Cloud Monitoring automatically. You can also make your own metrics based on logs.    Managing Compute Engine VM images and binaries   Can create an image based on a VM’s persistent disk, and then re-use it.  You can query the metadata server inside the VM to use as environment variables.   Managed instance groups: create an instance ‘template’ off an image. Autoscales, autoheals and can be used with a load balancer.  Option for stateless/stateful (preserves data)/unmanaged. Can autoheal based on a health check.     3.3 Deploying applications and services to Google Kubernetes Engine (GKE). Considerations include:\n Deploying a containerized application to GKE   Create a deployment based off an image in Container Registry.    Managing Kubernetes RBAC and Google Cloud IAM relationships.   RBAC: A role can perform operations on specific resources. Grant roles to GCP accounts or service accounts. Define a k8s Role object then a RoleBinding one to attach it to the user. Service-to-service IAM  See 4.2 Workload Identity.      Configuring Kubernetes namespaces   Runs in the default namespace by default. Create new ones for environments/teams.    Defining workload specifications (e.g., resource requirements)   Requests: what the container will get (minimum). K8s will only schedule the pod if it can assign enough resources.  If the resource request is larger than what is available on the nodes, the pod will never be scheduled.   Limits: how much resources a container consume before being restricted (maximum).  Memory limits stop the pod with an out of memory error if you run out. CPU limits throttle the pod if you hit the limit.   ResourceQuotas: Maximum combined requests \u0026 limits from a namespace. A common pattern is to have an unbounded resources in prod, and bounded in non-prod. LimitRange: Set the minimum and maximum container limits. Prevents having pods that are too small or too large. Cloud Tech Video: Resource Requests \u0026 Limits If persistent disks are needed, use a StatefulSet.    Building a container image using Cloud Build   Have the Cloud Build YAML build and publish the container to Container Registry.    Configuring application accessibility to user traffic and other services   Check VPC firewall rules, resource region and IAM permissions. Docs: Troubleshooting common networking issues.    Managing container life cycle   Pod state: Pending (being created, waiting for resources) - Running - Succeeded/Failed. Can set a restart policy to recreate if it fails with exponential backoff. Container state: Waiting - Running - Terminated. You can rollback deployments. Probes  LivenessProbe: lets k8s know if the pod is alive or dead. Great at solving deadlocks. ReadinessProbe: probe must pass before traffic is sent to a container. These can be HTTP, TCP or commands that run in the pod. Cloud Tech Video: Kubernetes Health Checks with Readiness and Liveness Probes      Define Kubernetes resources and configurations   Prefer the declarative method: use YAML files and kubectl apply -f.   3.4 Deploying a Cloud Function. Considerations include:\n Cloud Functions that are triggered via an event from Google Cloud services (e.g., Pub/Sub, Cloud Storage objects)   Pub/sub messages, cloud storage uploads, firestore updates are all predefined triggers. Called ‘background functions’. Respond to some data in a context. What’s sent through depends on the event.    Cloud Functions that are invoked via HTTP.   Use the function as a webhook. Easy to integrate with other services (Slack, GitHub). Supports the basic HTTP verbs. Docs: HTTP Functions (Cloud Functions).    Securing Cloud Functions   Perefer IAM. You can assign invoker permissions per-function. You can then send through an OAuth token in the header. If not, use OAuth 2.0. For HTTP functions, consider requiring HTTPS and restricting CORS. VPC: By default allows ingress and egress from the project and internet. You could restrict this. Cloud Functions: Handling CORS Requests Securing Cloud Functions (docs)   3.5 Using service accounts. Considerations include:\n Creating a service account according to the principle of least privilege   See 1.2 Running services with least privilege access.    Downloading and using a service account private key file   Download the JSON key file, but don’t commit it to code (prefer KMS).   Section 4: Integrating Google Cloud services 4.1 Integrating an application with data and storage services. Considerations include:\n Read/write data to/from various databases (e.g., SQL)   Bigquery SQL syntax.    Connecting to a data store (e.g., Cloud SQL, Cloud Spanner, Firestore, Cloud Bigtable)   Cloud SQL: use the Cloud SQL proxy to authenticate yourself with IAM. In GKE, run it in a seperate conatiner in the pod.  You can also use a private IP (available to all services in the VPC) and public IP (whitelist allowed clients).   Firestore: client libraries will update live by default and send diffs. Doesn’t use much power. Video: To Realtime or Not? Use the client libraries. In some environments you can just pick up the service account permissions automatically. Otherwise download the service account credentials (json) and pass them through.    Writing an application that publishes/consumes data asynchronously (e.g., from Pub/Sub)   See 1.1 Loosley Coupled Applications.    Storing and retrieving objects from Cloud Storage   GCS optimisation: batch uploads with -m, object-compose large files, don’t name files similarly, do large reads. Signed URL uploads: request a signed URL to HTTP PUT to. Good for file upload APIs exposed to users. Also see 1.1 Defining a key structure and 1.3.   4.2 Integrating an application with compute services. Considerations include:\n Implementing service discovery in GKE and Compute Engine   GCE: Either use the metadata server, or hit a DNS name from a load balancer. GKE   Endpoints\n Connect to an IP via a connection string, as opposed to hard-coding the IP. If it’s a DNS name, use an ExternalName service.    Kubernetes Services\n ClusterIP: Expose an IP to the cluster. NodePort: Expose an IP of each node at a specific port. LoadBalancer: Expose externally with a cloud LB.    In GCP, this is a regional network LB. Use an ingress object for a global LB.\n  Cloud Tech Video: Mapping External Services (Kubernetes).\n   Reading instance metadata to obtain application configuration You can hit the metadata server with HTTP and recieve key-value pairs. Pass metadata value into start-up scripts to avoid brittle designs.    Authenticating users by using OAuth2.0 Web Flow and Identity-Aware Proxy   Identity-Aware Proxy: auth (Google sign-in) + authorization (IAM) for GCP services. Oauth 2.0 Flow: request a token or authorization code (that can later be used to request a token) from Google. The user sees a prompt for consent. If they accept, you get a token you can send in the auth header of API calls.    Authenticating to Cloud APIs with Workload Identity   A GKE concept to link Kubernetes service accounts with Google ones. Setup steps: create the service accounts, apply the roles and a policy binding to the Google one, annotate the Kubernetes one.   4.3 Integrating Cloud APIs with applications. Considerations include:\n Enabling a Cloud API   gcloud services enable or via the Console.     Making API calls using supported options (e.g., Cloud Client Library, REST API or gRPC, APIs Explorer) taking into consideration:\n  Batching requests\n   Pub/Sub, GCS, DataFlow and more support batch ingestion.    Restricting return data   Use an API schema.    Paginating results   User asks for a page in the request. Design APIs with this from the beginning. Docs: API Design Patterns.    Caching results   See 1.1 Caching Solutions.    Error handling (e.g., exponential backoff)   Exponential backoff: limit to a point. Only retry on transient errors (too many requests, timeouts), not errors that won’t change between runs (authentication issues). The client APIs automatically backoff exponentially. Docs: Retry Strategy.    Using service accounts to make Cloud API calls   See 1.2 Running services with least privlidged access.   Section 5: Managing application performance monitoring 5.1 Managing Compute Engine VMs. Considerations include:\n Debugging a custom VM image using the serial port   Serial port logs are useful for crashes, failed boots, startup issues, or shutdown issues. You can set an instance metadata flag to send these logs to Cloud Logging.    Diagnosing a failed Compute Engine VM startup   Common problems: invalid startup script, insufficent access to start up script (e.g. GCS permissions), network tags. Common MIG problems: invalid templates (image does not exist), assigning a disk to multiple VMs to write, failing health-check (network tags).    Sending logs from a VM to Cloud Logging   See 3.2.    Viewing and analyzing logs   See 3.2.    Inspecting resource utilization over time   See 3.2.   5.2 Managing Google Kubernetes Engine workloads. Considerations include:\n Configuring logging and monitoring   System and app logs are sent by default. Prometheus is a monitoring agent for Kubernetes that runs as a sidecar pod.    Analyzing container life cycle events (e.g., CrashLoopBackOff, ImagePullErr)   ErrImagePull: Couldn’t get the container image from the registry (doesn’t exist, invalid tag). ImagePullBackOff: Didn’t have permission to get the container image. CrashLoopBackOff: Pod failed to create even after the restart policy (container or configuration bug).    Viewing and analyzing logs   Full support for the entire operations suite (Logging, Monitoring, Trace, etc).    Writing and exporting custom metrics   Install the Custom Metrics Adapter to the cluster. Modify app code to export a metric. You can also set up uptime checks and process health checks from within Cloud Monitoring.    Using external metrics and corresponding alerts   Can autoscale on metrics from other GCP services.    Configuring workload autoscaling   Set up a HorizontalPodAutoscaler object based on a metric (existing, custom or external). Changes the number of pods running the workload. Vertical Pod Autoscaler. Changes the resources given to pods. If you want to use both, use Multidimensional Pod Autoscaling. Cluster autoscaling  Cluster autoscaler. Changes the number of nodes in the cluster. Node Auto Provisioner. Changes the resources given to nodes.   Cloud Tech Video: Introduction to GKE Autoscaling.   5.3 Troubleshooting application performance. Considerations include:\n Creating a monitoring dashboard   GCE/GKE dashboard by default. Can create your own dashboard with metrics.    Writing custom metrics and creating log-based metrics   Custom metrics: set up the descriptor then write it to the logging agent. Logs-based metrics: set up in Cloud Logging.    Using Cloud Debugger   Injects snapshots (breakpoints) and log points (to Cloud Logging, without updating app code) into long-running applications.    Reviewing stack traces for error analysis   Error Reporting: holds error logs and groups them up per-issue.    Exporting logs from Google Cloud   Log sinks: sends to the default logs bucket, and can be configured to send to other sinks (BigQuery, Pub/Sub, other buckets).    Viewing logs in the Google Cloud Console   Types of logs  Platform logs. User logs (e.g. GCE logging agent logs). Security logs, includes audit logs (system logs, admin activities) and access transparency logs (GCP staff working on your project). Kept for 400 days. Multi-cloud logs (e.g. AWS logs).   Logs explorer (in the console): build a query, visualise.    Reviewing application performance (e.g., Cloud Trace, Prometheus, OpenTelemetry)   Open Telemetry/Open Census/GCP Client libraries send telemetry to Cloud Trace. Helps you track round-trip-time around the entire tech stack, visualised in spans. Can evaluate responsiveness, identify bottlenecks.    Monitoring and profiling a running application   Cloud Monitoring workspace runs in a host project. Resources have default metrics. Alerting: notifications based on metrics. Cloud Monitoring uptime checks: hit an endpoint, verify certificate, can do auth.    Using documentation, forums, and Google Cloud support   GCP quotas are increased by raising a request with GCP. For example, quotas apply to VM numbers and the CPUs/GPUs/Disks that are attached to them.  ","wordCount":"4019","inLanguage":"en","datePublished":"2021-11-24T16:28:15+10:00","dateModified":"2021-11-24T16:28:15+10:00","author":{"@type":"Person","name":"Matt Lui"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://mattlui.com/posts/pcd-notes/"},"publisher":{"@type":"Organization","name":"Matt Lui","logo":{"@type":"ImageObject","url":"https://mattlui.com/%3Clink%20/%20abs%20url%3E"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://mattlui.com/ accesskey=h title="Matt Lui (Alt + H)">Matt Lui</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://mattlui.com/>Home</a>&nbsp;»&nbsp;<a href=https://mattlui.com/posts/>Posts</a></div>
<h1 class=post-title>
Google Cloud Professional Cloud Developer Study Guide Notes
</h1>
<div class=post-description>
Complete Professional Cloud Developer notes built around the official study guide for the exam.
</div>
<div class=post-meta><span title="2021-11-24 16:28:15 +1000 +1000">November 24, 2021</span>&nbsp;·&nbsp;19 min&nbsp;·&nbsp;Matt Lui&nbsp;|&nbsp;<a href=https://github.com/gamma032steam/gamma032steam.github.io/tree/main/content/posts/pcd-notes.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header>
<div class=post-content><p>The Professional Cloud Developer exam covers a large, possibly unbounded, amount of content. These notes were built to cover every topic Google has suggested can be on the exam.</p>
<p>The notes have a grey background, and each correspond to one of the ninity-one dot-points in the official <a href=https://cloud.google.com/certification/guides/cloud-developer>GCP Professional Cloud Developer Study Guide</a>. All outbound links refer to Google Cloud documentation.</p>
<p>Everything&rsquo;s been sourced from <a href=https://acloudguru.com/>A Cloud Guru</a>, <a href=https://www.coursera.org/learn/gcp-fundamentals>Google Cloud Training on Coursera</a> or the <a href=https://cloud.google.com/docs>Google Cloud Docs</a> themselves.</p>
<h2 id=table-of-contents>Table of contents<a hidden class=anchor aria-hidden=true href=#table-of-contents>#</a></h2>
<ul>
<li><a href=#section-1-designing-highly-scalable-available-and-reliable-cloud-native-applications>Section 1: Designing highly scalable, available, and reliable cloud-native applications</a></li>
<li><a href=#section-2-building-and-testing-applications>Section 2: Building and testing applications</a></li>
<li><a href=#section-3-deploying-applications>Section 3: Deploying applications</a></li>
<li><a href=#section-4-integrating-google-cloud-services>Section 4: Integrating Google Cloud services</a></li>
<li><a href=#section-5-managing-application-performance-monitoring>Section 5: Managing application performance monitoring</a></li>
</ul>
<h2 id=section-1-designing-highly-scalable-available-and-reliable-cloud-native-applications>Section 1: Designing highly scalable, available, and reliable cloud-native applications<a hidden class=anchor aria-hidden=true href=#section-1-designing-highly-scalable-available-and-reliable-cloud-native-applications>#</a></h2>
<p>1.1 Designing high-performing applications and APIs. Considerations include:</p>
<ul>
<li>Microservices</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><a href=https://cloud.google.com/appengine/docs/standard/python/microservices-on-app-engine><em>Microservices</em></a> refers to an architectural style for developing applications. Microservices allow a large application to be decomposed into independent constituent parts, with each part having its own realm of responsibility.</li>
<li>Benefits
<ul>
<li>Smaller, more modular codebase and deployments. A/B releases, independent development cycles for each service.</li>
<li>Simplifies tangled dependencies.</li>
<li>Stronger contracts between services.</li>
<li>Easier to split up testing, cost accounting, logging and monitoring.</li>
</ul>
</li>
<li>On App Engine, deploy a service per microservice.</li>
</ul>
</blockquote>
<ul>
<li>Scaling velocity characteristics/trade-offs of IaaS (infrastructure as a service) vs. CaaS (container as a service) vs. PaaS (platform as a service)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Tradeoffs
<ul>
<li>IaaS (Compute Engine)</li>
<li>PaaS (App Engine / GKE)</li>
<li>CaaS (Cloud Run)</li>
<li>FaaS (Cloud Functions)</li>
</ul>
</li>
<li>Scalability
<ul>
<li>Serverless applications can scale quickly and you only pay for what you use (e.g. Cloud Run, Cloud Functions, App Engine).</li>
<li>Aim for stateless microservices.</li>
<li>You want to <a href=https://cloud.google.com/architecture/scalable-and-resilient-apps#minimize_startup_time>minimize start-up time for scalability</a>. Create images, use containers or improve the app.</li>
<li>With containers, use smaller base images (Alpine) and the builder pattern to minimize their size.</li>
<li>See 5.2 GKE Autoscaling.</li>
<li>GCE can <a href=https://cloud.google.com/compute/docs/autoscaler>autoscale managed instance groups</a>.</li>
<li>App Engine Flexible vs Standard: Standard spins up instances quicker and can have zero instances running. Flexible always has one running. Prefered standard for spiky or low traffic.</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>Geographic distribution of Google Cloud services (e.g., latency, regional services, zonal services)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Regions have three or more zones. Those zones have high-bandwidth, low-latency connections.</li>
<li>Deploy to multiple zones for high-availability and fault-tolerance.</li>
<li>Zonal services: VM instances, GKE Regional clusters.</li>
<li>Regional services: Most serverless tech (Cloud Functions, Cloud Run) Static IPs, GKE Zonal clusters.</li>
<li>Persistent Disks & Cloud SQL are zonal, but can sychronously replicate and become regional.</li>
<li><a href=https://cloud.google.com/compute/docs/regions-zones>Regions and Zones</a>.</li>
</ul>
</blockquote>
<ul>
<li>Defining a key structure for high-write applications using Cloud Storage, Cloud Bigtable, Cloud Spanner, or Cloud SQL</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Cloud Storage: don&rsquo;t name objects similarly.</li>
<li>Cloud Bigtable: one key per table. You can put multiple keys into this one key and seperate them with hashes for more distributed reads.</li>
<li>Cloud Spanner: Create second indexes and interleave related records for faster lookups.</li>
<li>CloudSQL: Create secondary indexes or clustered indexes.</li>
</ul>
</blockquote>
<ul>
<li>User session management</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Authentication
<ul>
<li>Integrate Google Sign-in with OAuth 2.0 / OpenID.</li>
<li>Better to use a third-party provider.</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>Caching solutions</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Memorystore: managed in-memory caching. Redis & memcached, so you can read and write from your application code.</li>
<li>Cloud CDN: Reduce latency by caching at the edge.</li>
</ul>
</blockquote>
<ul>
<li>Deploying and securing API services</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Secure images
<ul>
<li>Keep images up-to-date.</li>
<li>Consider who you&rsquo;re trusting.</li>
<li>Can do this in CI.</li>
</ul>
</li>
<li>CI
<ul>
<li>Build, create artifacts, test, run securty checks, deploy.</li>
</ul>
</li>
<li>Design
<ul>
<li>Use an API schema.</li>
<li>Cloud Endpoints / API Gateway: logging, monitoring, API keys, authentication.</li>
<li>Cloud Endpoints: runs in Cloud Run, works for most GCP services.</li>
<li>API Gateway: managed serverless gateway, simpler to set up.</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>Loosely coupled asynchronous applications (e.g., Apache Kafka, Pub/Sub)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Decouples application dependency. Great if components fail, you need multiple consumers of data, or an async workflow.</li>
<li>Many-to-many, one-to-many, many-to-one patterns.</li>
<li>Pull (default): subscriber makes a request to check for new messages.</li>
<li>Push: topic hits a HTTP endpoint.</li>
<li>Pub/Sub gives you implicit at-least-once delivery per subscription.</li>
<li>Use Cloud Tasks for more explicit notification, with retries & scheduling.</li>
</ul>
</blockquote>
<ul>
<li>Graceful shutdown on platform termination</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Flush logs.</li>
<li>Close file descriptors and database connections.</li>
<li>GKE: on graceful shutdown, calls a preStop hook -> a SIGTERM is recieved -> grace period -> SIGKILL.</li>
<li>Cloud functions: delete any temporary files, as these are stored in memory and can be carried over between runs.</li>
<li><a href=https://youtu.be/Z_l_kE1MDTc>Cloud Tech Video: Terminating with Grace (Kubernetes)</a>.</li>
<li><a href=https://cloud.google.com/blog/topics/developers-practitioners/graceful-shutdowns-cloud-run-deep-dive>Docs: Graceful Shutdown on Cloud Run</a>.</li>
</ul>
</blockquote>
<ul>
<li>Google-recommended practices and documentation</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><a href=https://cloud.google.com/architecture/scalable-and-resilient-apps>Docs: Patterns for scalable and resilient apps</a>.</li>
</ul>
</blockquote>
<p>1.2 Designing secure applications. Considerations include:</p>
<ul>
<li>Implementing requirements that are relevant for applicable regulations (e.g., data wipeout)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Per-industry regulations on data storage regions, encryption and PII.</li>
<li>Cloud Data Loss Prevention: discovers and protects sensitive data.</li>
</ul>
</blockquote>
<ul>
<li>Security mechanisms that protect services and resources</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>IAM: Divide into folders per-team and a projects per-environment. One project per application per environment. Assign least privilege.</li>
<li>VPC Firewall Rules: Direction (ingress/egress), priority (lower number is higher), action (allow/deny), status, target, source, protocol/port.
<ul>
<li>Helps define what traffic reaches your resources.</li>
</ul>
</li>
<li>VPC Service Controls: Controls ingress and egress for an entire service perimiter, which houses the resources in a project.</li>
</ul>
</blockquote>
<ul>
<li>Security mechanisms that secure/scan application binaries and manifests</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Cloud Web Security Scanner: crawls a site for vulnerabilities.</li>
<li><a href=https://cloud.google.com/container-analysis/docs/container-scanning-overview>Container Scanning</a>: available on-demand or as part of container registry.</li>
</ul>
</blockquote>
<ul>
<li>Storing and rotating application secrets and keys (e.g., Cloud KMS, HashiCorp Vault)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Cloud KMS: Integrated with GCP services. Can run cryptographic operations but not actually use the keys.</li>
<li>Cloud Secret Manager: Store API keys and credentials you need to download at runtime here.</li>
<li>Both do key rotation (limits exposure, shut down keys if they&rsquo;re exposed).</li>
</ul>
</blockquote>
<ul>
<li>Authenticating to Google services (e.g., application default credentials, JSON Web Token (JWT), OAuth 2.0)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Application default credentials: credentials from the service account you attached to the service.</li>
<li>JWT: alternative to OAuth 2.0 for some GCP APIs.</li>
<li>OAuth 2.0: See 4.2.</li>
</ul>
</blockquote>
<ul>
<li>IAM roles for users/groups/service accounts</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Use predefined roles or create custom roles with the permissions you choose.</li>
<li>Easily combine roles into a new one from the Cloud Console.</li>
<li>Prefer to apply roles to Google groups.</li>
</ul>
</blockquote>
<ul>
<li>Securing service-to-service communications (e.g., service mesh, Kubernetes Network Policies, and Kubernetes namespaces)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Service mesh: add a sidecar container to pods. Controlls ingress & egress. Security, load-balancing, traffic control, metrics and more.</li>
<li><a href=https://kubernetes.io/docs/concepts/services-networking/network-policies/>Kubernetes Network Policies</a>: object that controls ingress and egress from a pod. Specify allowed IP ranges, namespaces and pods.</li>
</ul>
</blockquote>
<ul>
<li>Running services with least privileged access (e.g., Workload Identity)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Create GCP service accounts to use instead of the Default Compute Service Account. Assign it access to only the services and scope it needs.</li>
<li>See 4.2 workload identity.</li>
</ul>
</blockquote>
<ul>
<li>Certificate-based authentication (e.g., SSL, mTLS)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>mTLS
<ul>
<li>A two-way authentication protocol (mutual TLS).</li>
<li>Possible to use mTLS as opposed to service account keys.</li>
<li>Automatically done by Istio between GKE pods.</li>
</ul>
</li>
<li>SSL
<ul>
<li>An encryption protocol required for HTTP(S) and SSL load balancers. Can be Google or self-managed.</li>
<li><a href=https://cloud.google.com/load-balancing/docs/ssl-certificates>Docs: SSL certificates overview</a>.</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>Google-recommended practices and documentation</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><a href=https://cloud.google.com/docs/enterprise/best-practices-for-enterprise-organizations>Docs: Best pratices for enterprise organizations</a>.</li>
<li><a href=https://services.google.com/fh/files/misc/google-cloud-security-foundations-guide.pdf>Whitepaper: Google Cloud security foundations guide</a>.</li>
</ul>
</blockquote>
<p>1.3 Managing application data. Considerations include:</p>
<ul>
<li>Defining database schemas for Google-managed databases (e.g., Firestore, Cloud Spanner, Cloud Bigtable, Cloud SQL)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Firestore: schemaless.
<ul>
<li>&lsquo;Collections&rsquo; are a group of related &lsquo;Documents&rsquo;, which should be kept lightweight.</li>
<li>To do this you can define hierarchical subcollections, which are collections associated with a document.</li>
<li><a href=https://firebase.google.com/docs/firestore/data-model>Docs: Firestore Data Model</a>.</li>
</ul>
</li>
<li>Datastore:
<ul>
<li>Entities have a unique key. An entity group is an entity and its descendants.</li>
<li>Generally, Firestore (Firestore in native mode) is preferred over Datastore (Firestore in datastore mode).</li>
</ul>
</li>
<li>Cloud SQL: standard DDL.</li>
<li>Cloud Spanner: extended DDL, with some extra features including table interleaving.
<ul>
<li><a href=https://cloud.google.com/spanner/docs/schema-and-data-mode>Docs: Spanner Schema and Data Model</a></li>
</ul>
</li>
<li>Bigtable: NoSQL (wide, data fields are optional). Broken into column families.
<ul>
<li><a href=https://cloud.google.com/spanner/docs/schema-and-data-mode>Docs: Bigtable Scema Design</a>.</li>
</ul>
</li>
<li>Also see 1.1 choosing a key structure.</li>
</ul>
</blockquote>
<ul>
<li>Choosing data storage options based on use case considerations, such as:</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Time-limited access to objects</li>
<li><a href=https://cloud.google.com/storage/docs/access-control/signed-urls>Signed URLs</a>: GCS URLs that provide temporary acccess.</li>
</ul>
</blockquote>
<ul>
<li>Data retention requirements</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Use the GCS storage tiers and Object Lifecycle Management rules to move between them automatically.</li>
<li>Object holds (for retention) and policy locks (that can&rsquo;t be removed).</li>
<li>Unmodified BigQuery partitions get a 50% discount after 90 days.</li>
</ul>
</blockquote>
<ul>
<li>Structured vs. unstructured data</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Use GCS for unstructured data.</li>
</ul>
</blockquote>
<ul>
<li>Strong vs. eventual consistency</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Spanner, Firestore for strong consistency.</li>
</ul>
</blockquote>
<ul>
<li>Data volume</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Switch off CloudSQL above the tens of TB mark.</li>
<li>Frequency of data access in Cloud Storage</li>
<li>Nearline: 30 days, Coldline: 90 days, Archive: 365 days</li>
<li>Storage price goes down, retrieval price goes up.</li>
</ul>
</blockquote>
<ul>
<li>Google-recommended practices and documentation</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><a href=https://cloud.google.com/blog/products/compute/choosing-the-right-compute-option-in-gcp-a-decision-tree>Blog: Choosing the right compute option in GCP: a decision tree</a>.</li>
</ul>
</blockquote>
<p>1.4 Application modernization. Considerations include:</p>
<ul>
<li>Using managed services</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>App engine standard: predefined runtimes.</li>
<li>App engine flex: any runtime or container.</li>
<li>Cloud functions: even-driven model.</li>
<li>Cloud run: runs a stateless container.</li>
</ul>
</blockquote>
<ul>
<li>Refactoring a monolith to microservices</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Strangler pattern: abstract and replace component-by-component.</li>
</ul>
</blockquote>
<ul>
<li>Designing stateless, horizontally scalable services</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Split services into a clean seperation of those that are stateless and stateful. Stateless services are easier to scale.</li>
</ul>
</blockquote>
<ul>
<li>Google-recommended practices and documentation</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><a href=https://cloud.google.com/solutions/application-modernization>GCP Application Modernisation</a></li>
<li><a href=https://cloud.google.com/architecture/devops/devops-tech-architecture>DevOps tech: Architecture</a></li>
<li><a href=https://cloud.google.com/architecture/scalable-and-resilient-apps#aim_for_statelessness>Aim for statelessness</a></li>
</ul>
</blockquote>
<h2 id=section-2-building-and-testing-applications>Section 2: Building and testing applications<a hidden class=anchor aria-hidden=true href=#section-2-building-and-testing-applications>#</a></h2>
<p>2.1 Setting up your local development environment. Considerations include:</p>
<ul>
<li>Emulating Google Cloud services for local application development</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Use the <a href=https://cloud.google.com/sdk/gcloud/reference/beta/emulators>GCP beta emulators</a> on your local machine for BigTable, Datastore, Firestore, Pub/Sub and Spanner.</li>
</ul>
</blockquote>
<ul>
<li>Creating Google Cloud projects</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Create a Project optionally under a folder, which are optionally under an Organisation Node.</li>
<li>Project name: You choose it. Can change it.</li>
<li>Project ID: You choose it. Can&rsquo;t change it.</li>
<li>Project number: GCP chooses it. Can&rsquo;t change it.</li>
</ul>
</blockquote>
<ul>
<li>Using the command-line interface (CLI), Google Cloud Console, and Cloud Shell tools</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>CLI: gcloud, gsutil (Cloud Storage), bq (BigQuery), cbt (BigTable) command-line tools.</li>
<li>Cloud shell: browser-based CLI and editor.</li>
</ul>
</blockquote>
<ul>
<li>Using developer tooling (e.g., Cloud Code, Skaffold)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Cloud Code (Skaffold): IDE extension for GCP development (easy deployments to GKE/Cloud Run for example).</li>
</ul>
</blockquote>
<p>2.2 Writing efficient code. Considerations include:</p>
<ul>
<li>Algorithm design</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Minimise time complexity.</li>
<li>Knowledge of basic data structures (linked lists, hash tables, arrays, search trees) and their advantages.</li>
</ul>
</blockquote>
<ul>
<li>Modern application patterns</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><a href=https://12factor.net/>12 Factor App</a></li>
</ul>
</blockquote>
<ul>
<li>Software development methodologies</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Agile > waterfall.</li>
<li>Prefer faster deployments and iterations.</li>
<li>Test-driven development: write tests before code.</li>
<li>Infrastructure as code: define Cloud resource with code.</li>
</ul>
</blockquote>
<ul>
<li>Debugging and profiling code</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>See 5.3, Cloud Trace and Cloud Debugger.</li>
</ul>
</blockquote>
<p>2.3 Testing. Considerations include:</p>
<ul>
<li>Unit testing</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Test a component in isolation.</li>
<li>Find easy-to-spot errors.</li>
<li>Automate your tests!</li>
</ul>
</blockquote>
<ul>
<li>Integration testing</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Group components together, include dependencies.</li>
</ul>
</blockquote>
<ul>
<li>Performance testing</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Measure latency.</li>
</ul>
</blockquote>
<ul>
<li>Load testing</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Place under heavy load, maybe for a long period and test scalability.</li>
</ul>
</blockquote>
<p>2.4 Building. Considerations include:</p>
<ul>
<li>Source control management</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Store code with git in Cloud Source Repositories. You can set up Cloud Build triggers to run when changes are pushed to certain branches.</li>
</ul>
</blockquote>
<ul>
<li>Creating secure container images from code</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Add security scanning the CI process. You can add this as a Cloud Build step and call Container Registry on-demand, check the severity level and fail if it&rsquo;s too high.</li>
<li>Use Google&rsquo;s managed base images, and build on top of those.</li>
<li><a href=https://github.com/GoogleContainerTools/jib>Jib</a>: creates optimized Docker images from Java applications</li>
</ul>
</blockquote>
<ul>
<li>Developing a continuous integration pipeline using services (e.g., Cloud Build, Container Registry) that construct deployment artifacts</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Cloud Build: fully managed, serverless container building. Can deploy to GCP, can create triggers, configured in YAML.
<ul>
<li>Each Cloud Build step in a pipeline is a Docker container.</li>
<li><a href=https://cloud.google.com/build/docs/configuring-builds/pass-data-between-steps>Pass data between steps</a> by writing to the <code>/workspace</code> directory.</li>
</ul>
</li>
<li>Spinnaker: CD for compute, containers, multi-cloud. E.g. set up a process for canary deployments.</li>
<li>Tekton: CI/CD for k8s.</li>
<li>Anthos Config Manager: matches the k8s environment to the config in a repo.</li>
<li>Jenkins: Older kitchen sink.</li>
</ul>
</blockquote>
<ul>
<li>Reviewing and improving continuous integration pipeline efficiency</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>See <a href=https://cloud.google.com/architecture/devops/devops-tech-continuous-integration>DevOps tech: Continious Integration</a>.</li>
<li>Metrics include: proportion of commits that trigger a build, test pass rate, build fix time, availability of feedback.</li>
<li>Improvements include: increasing velocity of deployments/merges, automation, build duration (&lt; 10 minutes), broken builds/tests, pulling in code outside the repo.</li>
</ul>
</blockquote>
<h2 id=section-3-deploying-applications>Section 3: Deploying applications<a hidden class=anchor aria-hidden=true href=#section-3-deploying-applications>#</a></h2>
<p>3.1 Recommend appropriate deployment strategies using the appropriate tools (e.g., Cloud Build, Spinnaker, Tekton, Anthos Configuration Manager) for the target compute environment (e.g., Compute Engine, Google Kubernetes Engine). Considerations include:</p>
<ul>
<li>Blue/green deployments</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Run two deployments at once. Switch the load balancer to the new version. Really easy to switch back if there&rsquo;s an issue.</li>
<li>GKE: Create a new deployment, test, then update the service selector. See <a href=https://cloud.google.com/architecture/implementing-deployment-and-testing-strategies-on-gke>Deployment Strategies on GKE</a>.</li>
</ul>
</blockquote>
<ul>
<li>Traffic-splitting deployments</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Useful for A/B testing.</li>
<li>Can be done in the console for App Engine.</li>
<li>GKE: Use Istio, or deploy some of the pods with the new version. May need session affinity.</li>
</ul>
</blockquote>
<ul>
<li>Rolling deployments</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>GCE: Can roll out new instance templates in a MIG.</li>
<li>GKE: Apply an updated deployment. Pods will be recreated. Can set a rollingUpdate strategy with a maxUnavailable, and maxSurge (extra pods) to minimise distruption.</li>
</ul>
</blockquote>
<ul>
<li>Canary deployments</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>For features that are best tested in prod.</li>
<li>GKE: Same as traffic-splitting.</li>
</ul>
</blockquote>
<p>3.2 Deploying applications and services on Compute Engine. Considerations include:</p>
<ul>
<li>Installing an application into a virtual machine (VM)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>SSH in and install, or use a startup script.</li>
</ul>
</blockquote>
<ul>
<li>Managing service accounts for VMs</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>By default, uses the Compute Engine Default Service Account.
<ul>
<li>Not recommended in pratice: it gives too broad of a permission set (project editor).</li>
</ul>
</li>
<li>Best to create a custom service account.</li>
</ul>
</blockquote>
<ul>
<li>Bootstrapping applications</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Provide a startup & shutdown script.
<ul>
<li>Can pass a startup script as a <code>startup-script-url</code> metadata tag, or add it directly.</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>Exporting application logs and metrics</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Install the Cloud Logging agent (Stackdriver). It collects logs from a few standard places, including syslog, by default. The logging standard is fluentd.</li>
<li>System metrics (CPU util, networking), are reported to Cloud Monitoring automatically. You can also make your own metrics based on logs.</li>
</ul>
</blockquote>
<ul>
<li>Managing Compute Engine VM images and binaries</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Can create an image based on a VM&rsquo;s persistent disk, and then re-use it.
<ul>
<li>You can query the metadata server inside the VM to use as environment variables.</li>
</ul>
</li>
<li>Managed instance groups: create an instance &lsquo;template&rsquo; off an image. Autoscales, autoheals and can be used with a load balancer.
<ul>
<li>Option for stateless/stateful (preserves data)/unmanaged.</li>
<li>Can autoheal based on a health check.</li>
</ul>
</li>
</ul>
</blockquote>
<p>3.3 Deploying applications and services to Google Kubernetes Engine (GKE). Considerations include:</p>
<ul>
<li>Deploying a containerized application to GKE</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Create a deployment based off an image in Container Registry.</li>
</ul>
</blockquote>
<ul>
<li>Managing Kubernetes RBAC and Google Cloud IAM relationships.</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><a href=https://cloud.google.com/kubernetes-engine/docs/how-to/role-based-access-control>RBAC</a>: A role can perform operations on specific resources.</li>
<li>Grant roles to GCP accounts or service accounts. Define a k8s Role object then a RoleBinding one to attach it to the user.</li>
<li>Service-to-service IAM
<ul>
<li>See 4.2 Workload Identity.</li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>Configuring Kubernetes namespaces</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Runs in the default namespace by default.</li>
<li>Create new ones for environments/teams.</li>
</ul>
</blockquote>
<ul>
<li>Defining workload specifications (e.g., resource requirements)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Requests: what the container will get (minimum). K8s will only schedule the pod if it can assign enough resources.
<ul>
<li>If the resource request is larger than what is available on the nodes, the pod will never be scheduled.</li>
</ul>
</li>
<li>Limits: how much resources a container consume before being restricted (maximum).
<ul>
<li>Memory limits stop the pod with an out of memory error if you run out.</li>
<li>CPU limits throttle the pod if you hit the limit.</li>
</ul>
</li>
<li>ResourceQuotas: Maximum combined requests & limits from a namespace. A common pattern is to have an unbounded resources in prod, and bounded in non-prod.</li>
<li>LimitRange: Set the minimum and maximum container limits. Prevents having pods that are too small or too large.</li>
<li><a href="https://www.youtube.com/watch?v=xjpHggHKm78">Cloud Tech Video: Resource Requests & Limits</a></li>
<li>If persistent disks are needed, use a <code>StatefulSet</code>.</li>
</ul>
</blockquote>
<ul>
<li>Building a container image using Cloud Build</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Have the Cloud Build YAML build and publish the container to Container Registry.</li>
</ul>
</blockquote>
<ul>
<li>Configuring application accessibility to user traffic and other services</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Check VPC firewall rules, resource region and IAM permissions.</li>
<li><a href=https://cloud.google.com/compute/docs/troubleshooting/troubleshooting-networking>Docs: Troubleshooting common networking issues</a>.</li>
</ul>
</blockquote>
<ul>
<li>Managing container life cycle</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Pod state: Pending (being created, waiting for resources) -> Running -> Succeeded/Failed.</li>
<li>Can set a restart policy to recreate if it fails with exponential backoff.</li>
<li>Container state: Waiting -> Running -> Terminated.</li>
<li>You can rollback deployments.</li>
<li>Probes
<ul>
<li>LivenessProbe: lets k8s know if the pod is alive or dead. Great at solving deadlocks.</li>
<li>ReadinessProbe: probe must pass before traffic is sent to a container.</li>
<li>These can be HTTP, TCP or commands that run in the pod.</li>
<li><a href="https://www.youtube.com/watch?v=mxEvAPQRwhw&">Cloud Tech Video: Kubernetes Health Checks with Readiness and Liveness Probes</a></li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>Define Kubernetes resources and configurations</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Prefer the declarative method: use YAML files and <code>kubectl apply -f</code>.</li>
</ul>
</blockquote>
<p>3.4 Deploying a Cloud Function. Considerations include:</p>
<ul>
<li>Cloud Functions that are triggered via an event from Google Cloud services (e.g., Pub/Sub, Cloud Storage objects)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Pub/sub messages, cloud storage uploads, firestore updates are all predefined triggers. Called &lsquo;background functions&rsquo;.</li>
<li>Respond to some data in a context. What&rsquo;s sent through depends on the event.</li>
</ul>
</blockquote>
<ul>
<li>Cloud Functions that are invoked via HTTP.</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Use the function as a webhook. Easy to integrate with other services (Slack, GitHub).</li>
<li>Supports the basic HTTP verbs.</li>
<li><a href=https://cloud.google.com/functions/docs/writing/http>Docs: HTTP Functions (Cloud Functions)</a>.</li>
</ul>
</blockquote>
<ul>
<li>Securing Cloud Functions</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Perefer IAM. You can assign invoker permissions per-function. You can then send through an OAuth token in the header.</li>
<li>If not, use OAuth 2.0.</li>
<li>For HTTP functions, consider requiring HTTPS and restricting CORS.</li>
<li>VPC: By default allows ingress and egress from the project and internet. You could restrict this.</li>
<li><a href=https://cloud.google.com/functions/docs/writing/http#preflight_request>Cloud Functions: Handling CORS Requests</a></li>
<li><a href=https://cloud.google.com/functions/docs/securing>Securing Cloud Functions (docs)</a></li>
</ul>
</blockquote>
<p>3.5 Using service accounts. Considerations include:</p>
<ul>
<li>Creating a service account according to the principle of least privilege</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>See 1.2 Running services with least privilege access.</li>
</ul>
</blockquote>
<ul>
<li>Downloading and using a service account private key file</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Download the JSON key file, but don&rsquo;t commit it to code (prefer KMS).</li>
</ul>
</blockquote>
<h2 id=section-4-integrating-google-cloud-services>Section 4: Integrating Google Cloud services<a hidden class=anchor aria-hidden=true href=#section-4-integrating-google-cloud-services>#</a></h2>
<p>4.1 Integrating an application with data and storage services. Considerations include:</p>
<ul>
<li>Read/write data to/from various databases (e.g., SQL)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><a href=https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax>Bigquery SQL syntax</a>.</li>
</ul>
</blockquote>
<ul>
<li>Connecting to a data store (e.g., Cloud SQL, Cloud Spanner, Firestore, Cloud Bigtable)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Cloud SQL: use the <a href=https://cloud.google.com/sql/docs/mysql/sql-proxy>Cloud SQL proxy</a> to authenticate yourself with IAM. In GKE, run it in a seperate conatiner in the pod.
<ul>
<li>You can also use a private IP (available to all services in the VPC) and public IP (whitelist allowed clients).</li>
</ul>
</li>
<li>Firestore: client libraries will update live by default and send diffs. Doesn&rsquo;t use much power. <a href="https://www.youtube.com/watch?v=3aoxOtMM2rc">Video: To Realtime or Not?</a></li>
<li>Use the client libraries. In some environments you can just pick up the service account permissions automatically. Otherwise download the service account credentials (json) and pass them through.</li>
</ul>
</blockquote>
<ul>
<li>Writing an application that publishes/consumes data asynchronously (e.g., from Pub/Sub)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>See 1.1 Loosley Coupled Applications.</li>
</ul>
</blockquote>
<ul>
<li>Storing and retrieving objects from Cloud Storage</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><a href=https://cloud.google.com/blog/products/gcp/optimizing-your-cloud-storage-performance-google-cloud-performance-atlas>GCS optimisation</a>: batch uploads with <code>-m</code>, object-compose large files, don&rsquo;t name files similarly, do large reads.</li>
<li>Signed URL uploads: request a signed URL to HTTP PUT to. Good for file upload APIs exposed to users.</li>
<li>Also see 1.1 Defining a key structure and 1.3.</li>
</ul>
</blockquote>
<p>4.2 Integrating an application with compute services. Considerations include:</p>
<ul>
<li>Implementing service discovery in GKE and Compute Engine</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>GCE: Either use the metadata server, or hit a DNS name from a load balancer.</li>
<li>GKE
<ul>
<li>
<p>Endpoints</p>
<ul>
<li>Connect to an IP via a connection string, as opposed to hard-coding the IP.</li>
<li>If it&rsquo;s a DNS name, use an <code>ExternalName</code> service.</li>
</ul>
</li>
<li>
<p>Kubernetes Services</p>
<ol>
<li><code>ClusterIP</code>: Expose an IP to the cluster.</li>
<li><code>NodePort</code>: Expose an IP of each node at a specific port.</li>
<li><code>LoadBalancer</code>: Expose externally with a cloud LB.</li>
</ol>
</li>
<li>
<p>In GCP, this is a regional network LB. Use an ingress object for a global LB.</p>
</li>
<li>
<p><a href=https://youtu.be/fvpq4jqtuZ8>Cloud Tech Video: Mapping External Services (Kubernetes)</a>.</p>
</li>
</ul>
</li>
<li>Reading instance metadata to obtain application configuration</li>
<li>You can hit the metadata server with HTTP and recieve key-value pairs.</li>
<li>Pass metadata value into start-up scripts to avoid brittle designs.</li>
</ul>
</blockquote>
<ul>
<li>Authenticating users by using OAuth2.0 Web Flow and Identity-Aware Proxy</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><a href=https://cloud.google.com/iap/docs/concepts-overview>Identity-Aware Proxy</a>: auth (Google sign-in) + authorization (IAM) for GCP services.</li>
<li><a href=https://developers.google.com/identity/protocols/oauth2>Oauth 2.0 Flow</a>: request a token or authorization code (that can later be used to request a token) from Google. The user sees a prompt for consent. If they accept, you get a token you can send in the auth header of API calls.</li>
</ul>
</blockquote>
<ul>
<li>Authenticating to Cloud APIs with Workload Identity</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>A GKE concept to link Kubernetes service accounts with Google ones.</li>
<li><a href=https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity>Setup steps</a>: create the service accounts, apply the roles and a policy binding to the Google one, annotate the Kubernetes one.</li>
</ul>
</blockquote>
<p>4.3 Integrating Cloud APIs with applications. Considerations include:</p>
<ul>
<li>Enabling a Cloud API</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><code>gcloud services enable</code> or via the Console.</li>
</ul>
</blockquote>
<ul>
<li>
<p>Making API calls using supported options (e.g., Cloud Client Library, REST API or gRPC, APIs Explorer) taking into consideration:</p>
</li>
<li>
<p>Batching requests</p>
</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Pub/Sub, GCS, DataFlow and more support batch ingestion.</li>
</ul>
</blockquote>
<ul>
<li>Restricting return data</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Use an API schema.</li>
</ul>
</blockquote>
<ul>
<li>Paginating results</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>User asks for a page in the request. Design APIs with this from the beginning.</li>
<li><a href=https://cloud.google.com/apis/design/design_patterns#list_pagination>Docs: API Design Patterns</a>.</li>
</ul>
</blockquote>
<ul>
<li>Caching results</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>See 1.1 Caching Solutions.</li>
</ul>
</blockquote>
<ul>
<li>Error handling (e.g., exponential backoff)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Exponential backoff: limit to a point. Only retry on transient errors (too many requests, timeouts), not errors that won&rsquo;t change between runs (authentication issues).</li>
<li>The client APIs automatically backoff exponentially.</li>
<li><a href=https://cloud.google.com/storage/docs/retry-strategy>Docs: Retry Strategy</a>.</li>
</ul>
</blockquote>
<ul>
<li>Using service accounts to make Cloud API calls</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>See 1.2 Running services with least privlidged access.</li>
</ul>
</blockquote>
<h2 id=section-5-managing-application-performance-monitoring>Section 5: Managing application performance monitoring<a hidden class=anchor aria-hidden=true href=#section-5-managing-application-performance-monitoring>#</a></h2>
<p>5.1 Managing Compute Engine VMs. Considerations include:</p>
<ul>
<li>Debugging a custom VM image using the serial port</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Serial port logs are useful for crashes, failed boots, startup issues, or shutdown issues.</li>
<li>You can set an instance metadata flag to send these logs to Cloud Logging.</li>
</ul>
</blockquote>
<ul>
<li>Diagnosing a failed Compute Engine VM startup</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Common problems: invalid startup script, insufficent access to start up script (e.g. GCS permissions), network tags.</li>
<li>Common MIG problems: invalid templates (image does not exist), assigning a disk to multiple VMs to write, failing health-check (network tags).</li>
</ul>
</blockquote>
<ul>
<li>Sending logs from a VM to Cloud Logging</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>See 3.2.</li>
</ul>
</blockquote>
<ul>
<li>Viewing and analyzing logs</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>See 3.2.</li>
</ul>
</blockquote>
<ul>
<li>Inspecting resource utilization over time</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>See 3.2.</li>
</ul>
</blockquote>
<p>5.2 Managing Google Kubernetes Engine workloads. Considerations include:</p>
<ul>
<li>Configuring logging and monitoring</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>System and app logs are sent by default.</li>
<li><a href=https://cloud.google.com/stackdriver/docs/solutions/gke/prometheus>Prometheus</a> is a monitoring agent for Kubernetes that runs as a sidecar pod.</li>
</ul>
</blockquote>
<ul>
<li>Analyzing container life cycle events (e.g., CrashLoopBackOff, ImagePullErr)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>ErrImagePull: Couldn&rsquo;t get the container image from the registry (doesn&rsquo;t exist, invalid tag).</li>
<li>ImagePullBackOff: Didn&rsquo;t have permission to get the container image.</li>
<li>CrashLoopBackOff: Pod failed to create even after the restart policy (container or configuration bug).</li>
</ul>
</blockquote>
<ul>
<li>Viewing and analyzing logs</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Full support for the entire operations suite (Logging, Monitoring, Trace, etc).</li>
</ul>
</blockquote>
<ul>
<li>Writing and exporting custom metrics</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Install the Custom Metrics Adapter to the cluster. Modify app code to export a metric.</li>
<li>You can also set up uptime checks and process health checks from within Cloud Monitoring.</li>
</ul>
</blockquote>
<ul>
<li>Using external metrics and corresponding alerts</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Can autoscale on metrics from other GCP services.</li>
</ul>
</blockquote>
<ul>
<li>Configuring workload autoscaling</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Set up a <code>HorizontalPodAutoscaler</code> object based on a metric (existing, custom or external). Changes the number of pods running the workload.</li>
<li>Vertical Pod Autoscaler. Changes the resources given to pods.</li>
<li>If you want to use both, use Multidimensional Pod Autoscaling.</li>
<li>Cluster autoscaling
<ul>
<li><a href=https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-autoscaler>Cluster autoscaler</a>. Changes the number of nodes in the cluster.</li>
<li>Node Auto Provisioner. Changes the resources given to nodes.</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=cFhch7hozRg">Cloud Tech Video: Introduction to GKE Autoscaling</a>.</li>
</ul>
</blockquote>
<p>5.3 Troubleshooting application performance. Considerations include:</p>
<ul>
<li>Creating a monitoring dashboard</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>GCE/GKE dashboard by default.</li>
<li>Can create your own dashboard with metrics.</li>
</ul>
</blockquote>
<ul>
<li>Writing custom metrics and creating log-based metrics</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Custom metrics: set up the descriptor then write it to the logging agent.</li>
<li>Logs-based metrics: set up in Cloud Logging.</li>
</ul>
</blockquote>
<ul>
<li>Using Cloud Debugger</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Injects snapshots (breakpoints) and log points (to Cloud Logging, without updating app code) into long-running applications.</li>
</ul>
</blockquote>
<ul>
<li>Reviewing stack traces for error analysis</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Error Reporting: holds error logs and groups them up per-issue.</li>
</ul>
</blockquote>
<ul>
<li>Exporting logs from Google Cloud</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Log sinks: sends to the default logs bucket, and can be configured to send to other sinks (BigQuery, Pub/Sub, other buckets).</li>
</ul>
</blockquote>
<ul>
<li>Viewing logs in the Google Cloud Console</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Types of logs
<ul>
<li>Platform logs.</li>
<li>User logs (e.g. GCE logging agent logs).</li>
<li>Security logs, includes audit logs (system logs, admin activities) and access transparency logs (GCP staff working on your project). Kept for 400 days.</li>
<li>Multi-cloud logs (e.g. AWS logs).</li>
</ul>
</li>
<li>Logs explorer (in the console): build a query, visualise.</li>
</ul>
</blockquote>
<ul>
<li>Reviewing application performance (e.g., Cloud Trace, Prometheus, OpenTelemetry)</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Open Telemetry/Open Census/GCP Client libraries send telemetry to Cloud Trace.</li>
<li>Helps you track round-trip-time around the entire tech stack, visualised in spans.</li>
<li>Can evaluate responsiveness, identify bottlenecks.</li>
</ul>
</blockquote>
<ul>
<li>Monitoring and profiling a running application</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li>Cloud Monitoring workspace runs in a host project.</li>
<li>Resources have default metrics.</li>
<li>Alerting: notifications based on metrics.</li>
<li>Cloud Monitoring uptime checks: hit an endpoint, verify certificate, can do auth.</li>
</ul>
</blockquote>
<ul>
<li>Using documentation, forums, and Google Cloud support</li>
</ul>
<blockquote class=pcd-note>
<ul>
<li><a href=https://cloud.google.com/compute/quotas>GCP quotas</a> are increased by raising a request with GCP. For example, quotas apply to VM numbers and the CPUs/GPUs/Disks that are attached to them.</li>
</ul>
</blockquote>
</div>
<footer class=post-footer>
<nav class=paginav>
<a class=next href=https://mattlui.com/posts/mui-drawer/>
<span class=title>Next Page »</span>
<br>
<span>Material UI Drawer in a Div</span>
</a>
</nav>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share Google Cloud Professional Cloud Developer Study Guide Notes on twitter" href="https://twitter.com/intent/tweet/?text=Google%20Cloud%20Professional%20Cloud%20Developer%20Study%20Guide%20Notes&url=https%3a%2f%2fmattlui.com%2fposts%2fpcd-notes%2f&hashtags="><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Google Cloud Professional Cloud Developer Study Guide Notes on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmattlui.com%2fposts%2fpcd-notes%2f&title=Google%20Cloud%20Professional%20Cloud%20Developer%20Study%20Guide%20Notes&summary=Google%20Cloud%20Professional%20Cloud%20Developer%20Study%20Guide%20Notes&source=https%3a%2f%2fmattlui.com%2fposts%2fpcd-notes%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Google Cloud Professional Cloud Developer Study Guide Notes on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fmattlui.com%2fposts%2fpcd-notes%2f&title=Google%20Cloud%20Professional%20Cloud%20Developer%20Study%20Guide%20Notes"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Google Cloud Professional Cloud Developer Study Guide Notes on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmattlui.com%2fposts%2fpcd-notes%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Google Cloud Professional Cloud Developer Study Guide Notes on whatsapp" href="https://api.whatsapp.com/send?text=Google%20Cloud%20Professional%20Cloud%20Developer%20Study%20Guide%20Notes%20-%20https%3a%2f%2fmattlui.com%2fposts%2fpcd-notes%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share Google Cloud Professional Cloud Developer Study Guide Notes on telegram" href="https://telegram.me/share/url?text=Google%20Cloud%20Professional%20Cloud%20Developer%20Study%20Guide%20Notes&url=https%3a%2f%2fmattlui.com%2fposts%2fpcd-notes%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=https://mattlui.com/>Matt Lui</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>